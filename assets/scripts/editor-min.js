var app=new Vue({el:"#app",data:function(){return{title:"WeChat Format",aboutOutput:"",output:"",source:"",editorThemes:[{label:"base16-light",value:"base16-light"},{label:"duotone-light",value:"duotone-light"},{label:"monokai",value:"monokai"}],currentEditorTheme:"base16-light",editor:null,builtinFonts:[{label:"衬线",value:"Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif"},{label:"无衬线",value:"Roboto, Oxygen, Ubuntu, Cantarell, PingFangSC-light, PingFangTC-light, 'Open Sans', 'Helvetica Neue', sans-serif"}],currentFont:"Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif",currentSize:"14px",sizeOption:[{label:"14px",value:"14px",desc:"较小"},{label:"16px",value:"16px",desc:"默认"},{label:"17px",value:"17px",desc:"正常"},{label:"18px",value:"18px",desc:"稍大"}],currentTheme:"zhang",themeOption:[{label:"default",value:"default",author:"Lyric"},{label:"lupeng",value:"lupeng",author:"鲁鹏"},{label:"zhang",value:"zhang",author:"张小璋"}],styleThemes:{default:defaultTheme,lupeng:lupengTheme}}},mounted(){var e=this;this.editor=CodeMirror.fromTextArea(document.getElementById("editor"),{lineNumbers:!1,lineWrapping:!0,styleActiveLine:!0,theme:this.currentEditorTheme,mode:"text/x-markdown"}),this.editor.on("change",(function(t,n){e.refresh()})),this.wxRenderer=new WxRenderer({theme:this.styleThemes.default,fonts:this.currentFont,size:this.currentSize}),axios({method:"get",url:"./assets/default-content.md"}).then((function(t){e.editor.setValue(t.data)}))},methods:{renderWeChat:function(e){var t=marked(e,{renderer:this.wxRenderer.getRenderer()});return this.wxRenderer.hasFootnotes()&&(t+=this.wxRenderer.buildFootnotes()),t},editorThemeChanged:function(e){this.editor.setOption("theme",e)},fontChanged:function(e){this.wxRenderer.setOptions({fonts:e}),this.refresh()},sizeChanged:function(e){this.wxRenderer.setOptions({size:e}),this.refresh()},themeChanged:function(e){var t=this.styleThemes[e];this.wxRenderer.setOptions({theme:t}),this.refresh()},refresh:function(){this.output=this.renderWeChat(this.editor.getValue())},copy:function(){var e=document.getElementById("output");e.focus(),window.getSelection().removeAllRanges();var t=document.createRange();t.setStartBefore(e.firstChild),t.setEndAfter(e.lastChild),window.getSelection().addRange(t);try{document.execCommand("copy")?this.$message({message:"已复制到剪贴板",type:"success"}):this.$message({message:"未能复制到剪贴板，请全选后右键复制",type:"warning"})}catch(e){this.$message({message:"未能复制到剪贴板，请全选后右键复制",type:"warning"})}}}});